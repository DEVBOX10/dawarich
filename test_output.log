Run options: include {locations: {"./spec/services/users/export_import_integration_spec.rb" => [21]}}
Created dataset with 12 points

=== DEBUGGING EXPORT DATA ===
Export counts: {"areas" => 3, "imports" => 2, "exports" => 2, "trips" => 2, "stats" => 2, "notifications" => 4, "points" => 12, "visits" => 3, "places" => 2}
Points in export: 12
Places in export: 2
First point sample: {"timestamp" => 1714559220, "longitude" => -73.9851, "latitude" => 40.7589, "import_reference" => {"name" => "March 2024 Data", "source" => 0, "created_at" => "2025-06-30T16:10:46.550Z"}, "country_info" => {"name" => "United States", "iso_a2" => "US", "iso_a3" => "USA"}, "visit_reference" => {"name" => "Work Visit", "started_at" => "2025-06-30T16:10:46.711Z", "ended_at" => "2025-06-30T17:10:46.711Z"}}
First place sample: {"name" => "Office Building", "latitude" => "40.7589", "longitude" => "-73.9851", "source" => "manual"}
Imports in export: 2
Countries referenced: ["United States", "Canada"]
=== END DEBUG ===
Import stats: {settings_updated: true, areas_created: 3, places_created: 0, imports_created: 2, exports_created: 2, trips_created: 2, stats_created: 2, notifications_created: 4, visits_created: 3, points_created: 0, files_restored: 3}
Original counts: {areas: 3, imports: 2, exports: 2, trips: 2, stats: 2, notifications: 5, points: 12, visits: 3, places: 2}
Target counts: {areas: 3, imports: 2, exports: 2, trips: 2, stats: 2, notifications: 5, points: 0, visits: 3, places: 2}
F/Users/frey/.rvm/rubies/ruby-3.4.1/bin/ruby -I/Users/frey/.rvm/gems/ruby-3.4.1/gems/rspec-core-3.13.3/lib:/Users/frey/.rvm/gems/ruby-3.4.1/gems/rspec-support-3.13.3/lib /Users/frey/.rvm/gems/ruby-3.4.1/gems/rspec-core-3.13.3/exe/rspec --pattern spec/swagger/\*\*/\*_spec.rb --format Rswag::Specs::SwaggerFormatter --dry-run --order defined
Generating Swagger docs ...
Swagger doc generated at /Users/frey/projects/dawarich/dawarich/swagger/v1/swagger.yaml

Top 10 slowest examples (0.00002 seconds, 0.6% of total time):
  Areas API /api/v1/areas post area created returns a 201 response
    0.00001 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Stats API /api/v1/stats get stats found returns a 200 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Areas API /api/v1/areas post invalid request returns a 422 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Areas API /api/v1/areas/{id} delete area deleted returns a 200 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Health API /api/v1/health get Healthy returns a 200 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Points API /api/v1/points get points found returns a 200 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Users API /api/v1/users/me get user found returns a 200 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Settings API /api/v1/settings get settings found returns a 200 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Settings API /api/v1/settings patch settings updated returns a 200 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143
  Points API /api/v1/points/{id} delete point deleted returns a 200 response
    0 seconds /Users/frey/.rvm/gems/ruby-3.4.1/gems/rswag-specs-2.16.0/lib/rswag/specs/example_group_helpers.rb:143

Top 10 slowest example groups:
  Health API
    0.00039 seconds average (0.00039 seconds / 1 example) ./spec/swagger/api/v1/health_controller_spec.rb:5
  Points API
    0.00016 seconds average (0.00065 seconds / 4 examples) ./spec/swagger/api/v1/points_controller_spec.rb:5
  Areas API
    0.00013 seconds average (0.00052 seconds / 4 examples) ./spec/swagger/api/v1/areas_controller_spec.rb:5
  Stats API
    0.00013 seconds average (0.00013 seconds / 1 example) ./spec/swagger/api/v1/stats_controller_spec.rb:5
  Users API
    0.00012 seconds average (0.00012 seconds / 1 example) ./spec/swagger/api/v1/users_controller_spec.rb:5
  Settings API
    0.00011 seconds average (0.00021 seconds / 2 examples) ./spec/swagger/api/v1/settings_controller_spec.rb:5
  Overland Batches API
    0.0001 seconds average (0.0002 seconds / 2 examples) ./spec/swagger/api/v1/overland/batches_controller_spec.rb:5
  Api::V1::Countries::VisitedCities
    0.00009 seconds average (0.00017 seconds / 2 examples) ./spec/swagger/api/v1/countries/visited_cities_spec.rb:5
  OwnTracks Points API
    0.00009 seconds average (0.00017 seconds / 2 examples) ./spec/swagger/api/v1/owntracks/points_controller_spec.rb:5
  Api::V1::PhotosController
    0.00008 seconds average (0.00025 seconds / 3 examples) ./spec/swagger/api/v1/photos_controller_spec.rb:5

Finished in 0.00388 seconds (files took 1.87 seconds to load)
24 examples, 0 failures

Coverage report generated for RSpec to /Users/frey/projects/dawarich/dawarich/coverage.
Line Coverage: 61.36% (670 / 1092)


Failures:

  1) Users Export-Import Integration complete export-import cycle exports and imports all user data while preserving relationships
     Failure/Error: expect(target_counts[:points]).to eq(original_counts[:points])
       Expected 0 to eq 12.
     # ./spec/services/users/export_import_integration_spec.rb:71:in 'block (3 levels) in <top (required)>'
     # /Users/frey/.rvm/gems/ruby-3.4.1/gems/webmock-3.25.1/lib/webmock/rspec.rb:39:in 'block (2 levels) in <top (required)>'

Top 1 slowest examples (0.67919 seconds, 16.2% of total time):
  Users Export-Import Integration complete export-import cycle exports and imports all user data while preserving relationships
    0.67919 seconds ./spec/services/users/export_import_integration_spec.rb:21

Finished in 4.18 seconds (files took 2.21 seconds to load)
1 example, 1 failure

Failed examples:

rspec ./spec/services/users/export_import_integration_spec.rb:21 # Users Export-Import Integration complete export-import cycle exports and imports all user data while preserving relationships

Coverage report generated for RSpec to /Users/frey/projects/dawarich/dawarich/coverage.
Line Coverage: 65.56% (1593 / 2430)
Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
